var z=Object.create;var S=Object.defineProperty;var Z=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty;var B=r=>S(r,"__esModule",{value:!0});var J=(r,i)=>{B(r);for(var e in i)S(r,e,{get:i[e],enumerable:!0})},V=(r,i,e)=>{if(i&&typeof i=="object"||typeof i=="function")for(let n of j(i))!P.call(r,n)&&n!=="default"&&S(r,n,{get:()=>i[n],enumerable:!(e=Z(i,n))||e.enumerable});return r},E=r=>V(B(S(r!=null?z(p(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);J(exports,{Checks:()=>St,ColumnOptionsExtra:()=>gt,ColumnPrefix:()=>A,ColumnPrimaryType:()=>R,ColumnSuffix:()=>U,ColumnType:()=>G,ConstLength:()=>k,EMAIL_LENGTH_MAX:()=>nt,EMAIL_LENGTH_MIN:()=>it,IndexColumns:()=>Et,MANY_TO_MANY_OPTION_DEFAULT:()=>ut,MANY_TO_ONE_OPTION_DEFAULT:()=>It,NAME_LENGTH_MAX:()=>st,NAME_LENGTH_MIN:()=>ot,ONE_TO_ONE_OPTION_DEFAULT:()=>$t,PASSWORD_LENGTH_MAX:()=>at,PASSWORD_LENGTH_MIN:()=>ct,PGSQL_BIG_INTEGER_MAX:()=>C,PGSQL_BIG_INTEGER_MIN:()=>tt,PGSQL_INTEGER_MAX:()=>W,PGSQL_INTEGER_MIN:()=>Y,PGSQL_MAX_IDENTIFIER_LENGTH:()=>D,PGSQL_NUMERIC_MAX:()=>rt,PGSQL_NUMERIC_MIN:()=>et,PGSQL_SMALL_INTEGER_MAX:()=>y,PGSQL_SMALL_INTEGER_MIN:()=>T,SafeNamingStrategy:()=>v,UniqueColumns:()=>Rt,cryptSha1:()=>l,safeConstraint:()=>f,safeIndex:()=>m,safeUnique:()=>F,stripPublic:()=>x,stripSchema:()=>L});var Q=E(require("typeorm"));var D=63,W=2147483647,Y=-2147483648,y=32767,T=-32768,C="9223372036854775807",tt="-9223372036854775808",rt="3141592653589793238462643383279502.1618033988749894848204586834365638",et="-3141592653589793238462643383279502.1618033988749894848204586834365638",nt=254,it=6,st=99,ot=1,at=128,ct=5,gt={comment:"Extra data in JSON format",default:{},name:"extra",nullable:!1,type:"json"},R;(function(g){g.BigInteger="bigint",g.Decimal="decimal",g.Integer="integer",g.SmallInteger="smallint",g.UUID="uuid"})(R||(R={}));var G;(function(t){t.BigInteger="bigint",t.Bit="bit",t.BitVarying="bit varying",t.Bool="bool",t.Boolean="boolean",t.Box="box",t.ByteHexadecimal="bytea",t.CIText="citext",t.Char="char",t.Character="character",t.CharacterVarying="character varying",t.Circle="circle",t.Cube="cube",t.Date="date",t.DateRange="daterange",t.Decimal="decimal",t.DoublePrecision="double precision",t.Enum="enum",t.Float="float",t.Float4="float4",t.Float8="float8",t.Geography="geography",t.Geometry="geometry",t.HStore="hstore",t.IPAddress="inet",t.IPCIDR="cidr",t.Int="int",t.Int2="int2",t.Int4="int4",t.Int4Range="int4range",t.Int8="int8",t.Int8Range="int8range",t.Integer="integer",t.Interval="interval",t.JSON="json",t.JSONB="jsonb",t.LabelTrees="ltree",t.Line="line",t.LineSegment="lseg",t.MACAddress="macaddr",t.Money="money",t.NumberRange="numrange",t.Numeric="numeric",t.Path="path",t.Point="point",t.Polygon="polygon",t.Real="real",t.SmallInteger="smallint",t.String="character varying",t.Text="text",t.TextSearchQuery="tsquery",t.TextSearchVector="tsvector",t.Time="time",t.TimeStamp="timestamp",t.TimeStampWithTimeZoneAbbr="timestamptz",t.TimeStampWithTimeZoneRange="tstzrange",t.TimeStampWithoutTimeZone="timestamp without time zone",t.TimeStampWithoutTimeZoneRange="tsrange",t.TimeWithTimeZoneAbbr="timetz",t.TimeWithTimeZone="time with time zone",t.TimeWithoutTimeZone="time without time zone",t.TimeStampWithTimeZone="timestamp with time zone",t.UUID="uuid",t.VariableBitString="varbit",t.VariableChar="varchar",t.XML="xml"})(G||(G={}));var k;(function(c){c[c.EmailMax=254]="EmailMax",c[c.EmailMin=6]="EmailMin",c[c.NameMax=99]="NameMax",c[c.NameMin=1]="NameMin",c[c.PassMax=128]="PassMax",c[c.PassMin=5]="PassMin"})(k||(k={}));var A;(function(s){s.AltKey="ak",s.Check="ck",s.Default="df",s.Exclusion="ex",s.ForeignKey="fk",s.Index="idx",s.PrimaryKey="pk",s.Relation="rel",s.Sequences="seq",s.Unique="uq"})(A||(A={}));var U;(function(s){s.AltKey="AK",s.Check="CK",s.Default="DF",s.Exclusion="EX",s.ForeignKey="FK",s.Index="IDX",s.PrimaryKey="PK",s.Relation="REL",s.Sequences="SEQ",s.Unique="UQ"})(U||(U={}));function ft(r){let i=Array(r.length>>2);for(let e=0;e<i.length;e+=1)i[e]=0;for(let e=0;e<r.length*8;e+=8)i[e>>5]|=(r.charCodeAt(e/8)&255)<<24-e%32;return i}function dt(r){let i="";for(let e=0;e<r.length*32;e+=8)i+=String.fromCharCode(r[e>>5]>>>24-e%32&255);return i}function _t(r,i){r[i>>5]|=128<<24-i%32,r[(i+64>>9<<4)+15]=i;let e=Array(80),n=1732584193,o=-271733879,g=-1732584194,c=271733878,d=-1009589776;for(let a=0;a<r.length;a+=16){let _=n,s=o,b=g,I=c,$=d;for(let h=0;h<80;h+=1){h<16?e[h]=r[a+h]:e[h]=M(e[h-3]^e[h-8]^e[h-14]^e[h-16],1);let O=u(u(M(n,5),ht(h,o,g,c)),u(u(d,e[h]),xt(h)));d=c,c=g,g=M(o,30),o=n,n=O}n=u(n,_),o=u(o,s),g=u(g,b),c=u(c,I),d=u(d,$)}return Array(n,o,g,c,d)}function ht(r,i,e,n){return r<20?i&e|~i&n:r<40?i^e^n:r<60?i&e|i&n|e&n:i^e^n}function xt(r){return r<40?r<20?1518500249:1859775393:r<60?r<20?1518500249:-1894007588:r<20?1518500249:-899497514}function u(r,i){let e=(r&65535)+(i&65535);return(r>>16)+(i>>16)+(e>>16)<<16|e&65535}function M(r,i){return r<<i|r>>>32-i}function bt(r){let i="",e=-1,n,o;for(;++e<r.length;)n=r.charCodeAt(e),o=e+1<r.length?r.charCodeAt(e+1):0,55296<=n&&n<=56319&&56320<=o&&o<=57343&&(n=65536+((n&1023)<<10)+(o&1023),e+=1),n<=127?i+=String.fromCharCode(n):n<=2047?i+=String.fromCharCode(192|n>>>6&31,128|n&63):n<=65535?i+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|n&63):n<=2097151&&(i+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|n&63));return i}function lt(r){return dt(_t(ft(r),r.length*8))}function At(r){let i="",e;for(let n=0;n<r.length;n+=1)e=r.charCodeAt(n),i+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(e&15);return i}function l(r){return At(lt(bt(r)))}function L(r,i=!0){let e=r.trim().normalize("NFC");if(!e.includes("."))return e;if(i&&e.startsWith("public."))return e.substr(7);let n=e.split(".");return n.length!==2?e:n[1]}function x(r,i=!0){let e=r.trim().normalize("NFC");return i?L(r,!0):e}function q(r,i=!1){return r.replace(/^([A-Z])|[\s-_](\w)/g,function(e,n,o,g){return i&&g===0?n:o?o.toUpperCase():n.toLowerCase()})}function w(r){return r.replace(/(?:([a-z])([A-Z]))|(?:((?!^)[A-Z])([a-z]))/g,"$1_$3$2$4").toLowerCase()}var N=64;function f(r,i="_",e="__"){if(r.length<N){let a=r.trim().split(e),b=a.pop().split(i).map(w),$=`${a.join(e)}${e}${b.join(i)}`;return $.length<N?$:r}let n=r.trim().split(e),o=[...n].pop(),c=o.split(i).map(w).map(a=>a.endsWith("_id")||a.endsWith("_ref")?a.substring(0,a.length-3):a.endsWith("_uuid")?a.substring(0,a.length-5):a),d=n.join(e);{let a=`${d}${c.join(i)}`;if(a.length<N)return a}{let a=`${d}${c.map(_=>q(_)).join(i)}`;if(a.length<N)return a}{let a=`${d}${c.map(_=>q(_)).join(i)}`;if(a.length<N)return a}{let a=`${d}${l(o)}`;if(a.length<N)return a}{let a=n.shift(),_=n.join(e)+o,s=`${a}${e}${l(_)}`;if(s.length<N)return s}return l(r)}var v=class extends Q.DefaultNamingStrategy{constructor(){super(...arguments);this.name="SafeNamingStrategy"}indexName(i,e,n,o="IDX",g=!0,c=!0){let d=x(String(i),g),a=D-o.length,_=e.map(b=>x(b,g)).join("_"),s=`${o}__${d}__${_}`;if(s.length>a){if(c){let b=`${o}__${_}`;if(b.length<=a)return f(b)}return f(`${o}__${l(s)}`)}else return f(s)}foreignKeyName(i,e,n,o,g="FK",c=!0,d=!0){let a=x(String(i),c),_=x(n||"",c),s=e.reduce((I,$)=>`${x(I,c)}__${x($,c)}`,`${a}__${_}`),b=D-g.length+2;if(s.length>b){if(d){let I=e.reduce(($,h)=>`_${x(h,c)}`,"");if(I.length<=b)return f(`${g}_${I}`)}return f(`${g}__${l(s)}`)}else return f(`${g}__${s}`)}primaryKeyName(i,e,n="PK",o=!0,g=!0){let c=x(String(i),o),d=D-n.length,a=e.map(s=>x(s,o)).join("_"),_=`${n}__${c}__${a}`;if(_.length>d){if(g){let s=`${n}__${a}`;if(s.length<=d)return f(s)}return f(`${n}__${l(_)}`)}else return f(_)}relationConstraintName(i,e,n="REL",o=!0,g=!0){let c=x(String(i),o),d=D-n.length,a=e.map(s=>x(s,o)).join("_"),_=`${n}__${c}__${a}`;if(_.length>d){if(g){let s=`${n}__${a}`;if(s.length<=d)return f(s)}return f(`${n}__${l(_)}`)}else return f(_)}};var ut={eager:!0},It={eager:!0,onDelete:"RESTRICT",onUpdate:"CASCADE"},$t={eager:!0,onDelete:"CASCADE",onUpdate:"CASCADE"};var H=E(require("typeorm"));function Nt(r){return r.map(i=>{i=i.trim();do i=i.trim().substring(0,i.length-1);while(i.endsWith(";"));return i}).join(" AND ")}function Dt(r,i){let e,n;if(typeof r=="string"||r instanceof String?i?(e=r,n=i):n=r:Array.isArray(r)?n=r:typeof r=="object"&&("name"in r&&(e=r.name),"expressions"in r&&(n=r.expressions)),!n||n.length===0)throw new Error(`Check expressions is required \u279C ${JSON.stringify(r)}, ${JSON.stringify(i)}`);return Array.isArray(n)||(n=[n]),n=Nt(n),{checkName:e,expressions:n}}function St(r,i){let{checkName:e,expressions:n}=Dt(r,i);return function(g,c){(0,H.getMetadataArgsStorage)().checks.push({target:c?g.constructor:g,name:e,expression:n})}}var K=E(require("typeorm"));function m(r,i="IDX",e="_",n="__"){return f(`${i}${n}${r.join(e)}`,e,n)}function Et(r,i=!1,e=!1){if(Array.isArray(r)){let n=r,o;return e===!0?o=A.Index:typeof e=="string"&&(o=e),(0,K.Index)(m(n,o),n)}else{let n=i,o=r;return e===!0?o=`${A.Index}__${o}`:typeof e=="string"&&(o=`${e}${o}`),(0,K.Index)(f(o),n)}}var X=E(require("typeorm"));function F(r,i="UQ",e="_",n="__"){return f(`${i}${n}${r.join(e)}`,e,n)}function Rt(r,i=!1,e=!1){if(Array.isArray(r)){let n=r,o;return e===!0?o=A.Unique:typeof e=="string"&&(o=e),(0,X.Unique)(F(n,o),n)}else{let n=i,o=r;return e===!0?o=`${A.Unique}__${o}`:typeof e=="string"&&(o=`${e}${o}`),(0,X.Unique)(f(o),n)}}
