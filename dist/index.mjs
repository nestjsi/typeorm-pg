import{DefaultNamingStrategy as j}from"typeorm";var D=63,W=2147483647,Y=-2147483648,y=32767,T=-32768,C="9223372036854775807",tt="-9223372036854775808",rt="3141592653589793238462643383279502.1618033988749894848204586834365638",et="-3141592653589793238462643383279502.1618033988749894848204586834365638",nt=254,it=6,st=99,ot=1,at=128,ct=5,gt={comment:"Extra data in JSON format",default:{},name:"extra",nullable:!1,type:"json"},G;(function(g){g.BigInteger="bigint",g.Decimal="decimal",g.Integer="integer",g.SmallInteger="smallint",g.UUID="uuid"})(G||(G={}));var k;(function(t){t.BigInteger="bigint",t.Bit="bit",t.BitVarying="bit varying",t.Bool="bool",t.Boolean="boolean",t.Box="box",t.ByteHexadecimal="bytea",t.CIText="citext",t.Char="char",t.Character="character",t.CharacterVarying="character varying",t.Circle="circle",t.Cube="cube",t.Date="date",t.DateRange="daterange",t.Decimal="decimal",t.DoublePrecision="double precision",t.Enum="enum",t.Float="float",t.Float4="float4",t.Float8="float8",t.Geography="geography",t.Geometry="geometry",t.HStore="hstore",t.IPAddress="inet",t.IPCIDR="cidr",t.Int="int",t.Int2="int2",t.Int4="int4",t.Int4Range="int4range",t.Int8="int8",t.Int8Range="int8range",t.Integer="integer",t.Interval="interval",t.JSON="json",t.JSONB="jsonb",t.LabelTrees="ltree",t.Line="line",t.LineSegment="lseg",t.MACAddress="macaddr",t.Money="money",t.NumberRange="numrange",t.Numeric="numeric",t.Path="path",t.Point="point",t.Polygon="polygon",t.Real="real",t.SmallInteger="smallint",t.String="character varying",t.Text="text",t.TextSearchQuery="tsquery",t.TextSearchVector="tsvector",t.Time="time",t.TimeStamp="timestamp",t.TimeStampWithTimeZoneAbbr="timestamptz",t.TimeStampWithTimeZoneRange="tstzrange",t.TimeStampWithoutTimeZone="timestamp without time zone",t.TimeStampWithoutTimeZoneRange="tsrange",t.TimeWithTimeZoneAbbr="timetz",t.TimeWithTimeZone="time with time zone",t.TimeWithoutTimeZone="time without time zone",t.TimeStampWithTimeZone="timestamp with time zone",t.UUID="uuid",t.VariableBitString="varbit",t.VariableChar="varchar",t.XML="xml"})(k||(k={}));var U;(function(c){c[c.EmailMax=254]="EmailMax",c[c.EmailMin=6]="EmailMin",c[c.NameMax=99]="NameMax",c[c.NameMin=1]="NameMin",c[c.PassMax=128]="PassMax",c[c.PassMin=5]="PassMin"})(U||(U={}));var u;(function(s){s.AltKey="ak",s.Check="ck",s.Default="df",s.Exclusion="ex",s.ForeignKey="fk",s.Index="idx",s.PrimaryKey="pk",s.Relation="rel",s.Sequences="seq",s.Unique="uq"})(u||(u={}));var M;(function(s){s.AltKey="AK",s.Check="CK",s.Default="DF",s.Exclusion="EX",s.ForeignKey="FK",s.Index="IDX",s.PrimaryKey="PK",s.Relation="REL",s.Sequences="SEQ",s.Unique="UQ"})(M||(M={}));function X(n){let i=Array(n.length>>2);for(let r=0;r<i.length;r+=1)i[r]=0;for(let r=0;r<n.length*8;r+=8)i[r>>5]|=(n.charCodeAt(r/8)&255)<<24-r%32;return i}function B(n){let i="";for(let r=0;r<n.length*32;r+=8)i+=String.fromCharCode(n[r>>5]>>>24-r%32&255);return i}function Q(n,i){n[i>>5]|=128<<24-i%32,n[(i+64>>9<<4)+15]=i;let r=Array(80),e=1732584193,o=-271733879,g=-1732584194,c=271733878,f=-1009589776;for(let a=0;a<n.length;a+=16){let d=e,s=o,b=g,I=c,$=f;for(let h=0;h<80;h+=1){h<16?r[h]=n[a+h]:r[h]=S(r[h-3]^r[h-8]^r[h-14]^r[h-16],1);let F=l(l(S(e,5),v(h,o,g,c)),l(l(f,r[h]),H(h)));f=c,c=g,g=S(o,30),o=e,e=F}e=l(e,d),o=l(o,s),g=l(g,b),c=l(c,I),f=l(f,$)}return Array(e,o,g,c,f)}function v(n,i,r,e){return n<20?i&r|~i&e:n<40?i^r^e:n<60?i&r|i&e|r&e:i^r^e}function H(n){return n<40?n<20?1518500249:1859775393:n<60?n<20?1518500249:-1894007588:n<20?1518500249:-899497514}function l(n,i){let r=(n&65535)+(i&65535);return(n>>16)+(i>>16)+(r>>16)<<16|r&65535}function S(n,i){return n<<i|n>>>32-i}function O(n){let i="",r=-1,e,o;for(;++r<n.length;)e=n.charCodeAt(r),o=r+1<n.length?n.charCodeAt(r+1):0,55296<=e&&e<=56319&&56320<=o&&o<=57343&&(e=65536+((e&1023)<<10)+(o&1023),r+=1),e<=127?i+=String.fromCharCode(e):e<=2047?i+=String.fromCharCode(192|e>>>6&31,128|e&63):e<=65535?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|e&63):e<=2097151&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|e&63));return i}function z(n){return B(Q(X(n),n.length*8))}function Z(n){let i="",r;for(let e=0;e<n.length;e+=1)r=n.charCodeAt(e),i+="0123456789abcdef".charAt(r>>>4&15)+"0123456789abcdef".charAt(r&15);return i}function A(n){return Z(z(O(n)))}function L(n,i=!0){let r=n.trim().normalize("NFC");if(!r.includes("."))return r;if(i&&r.startsWith("public."))return r.substr(7);let e=r.split(".");return e.length!==2?r:e[1]}function x(n,i=!0){let r=n.trim().normalize("NFC");return i?L(n,!0):r}function E(n,i=!1){return n.replace(/^([A-Z])|[\s-_](\w)/g,function(r,e,o,g){return i&&g===0?e:o?o.toUpperCase():e.toLowerCase()})}function R(n){return n.replace(/(?:([a-z])([A-Z]))|(?:((?!^)[A-Z])([a-z]))/g,"$1_$3$2$4").toLowerCase()}var N=64;function _(n,i="_",r="__"){if(n.length<N){let a=n.trim().split(r),b=a.pop().split(i).map(R),$=`${a.join(r)}${r}${b.join(i)}`;return $.length<N?$:n}let e=n.trim().split(r),o=[...e].pop(),c=o.split(i).map(R).map(a=>a.endsWith("_id")||a.endsWith("_ref")?a.substring(0,a.length-3):a.endsWith("_uuid")?a.substring(0,a.length-5):a),f=e.join(r);{let a=`${f}${c.join(i)}`;if(a.length<N)return a}{let a=`${f}${c.map(d=>E(d)).join(i)}`;if(a.length<N)return a}{let a=`${f}${c.map(d=>E(d)).join(i)}`;if(a.length<N)return a}{let a=`${f}${A(o)}`;if(a.length<N)return a}{let a=e.shift(),d=e.join(r)+o,s=`${a}${r}${A(d)}`;if(s.length<N)return s}return A(n)}var p=class extends j{constructor(){super(...arguments);this.name="SafeNamingStrategy"}indexName(i,r,e,o="IDX",g=!0,c=!0){let f=x(String(i),g),a=D-o.length,d=r.map(b=>x(b,g)).join("_"),s=`${o}__${f}__${d}`;if(s.length>a){if(c){let b=`${o}__${d}`;if(b.length<=a)return _(b)}return _(`${o}__${A(s)}`)}else return _(s)}foreignKeyName(i,r,e,o,g="FK",c=!0,f=!0){let a=x(String(i),c),d=x(e||"",c),s=r.reduce((I,$)=>`${x(I,c)}__${x($,c)}`,`${a}__${d}`),b=D-g.length+2;if(s.length>b){if(f){let I=r.reduce(($,h)=>`_${x(h,c)}`,"");if(I.length<=b)return _(`${g}_${I}`)}return _(`${g}__${A(s)}`)}else return _(`${g}__${s}`)}primaryKeyName(i,r,e="PK",o=!0,g=!0){let c=x(String(i),o),f=D-e.length,a=r.map(s=>x(s,o)).join("_"),d=`${e}__${c}__${a}`;if(d.length>f){if(g){let s=`${e}__${a}`;if(s.length<=f)return _(s)}return _(`${e}__${A(d)}`)}else return _(d)}relationConstraintName(i,r,e="REL",o=!0,g=!0){let c=x(String(i),o),f=D-e.length,a=r.map(s=>x(s,o)).join("_"),d=`${e}__${c}__${a}`;if(d.length>f){if(g){let s=`${e}__${a}`;if(s.length<=f)return _(s)}return _(`${e}__${A(d)}`)}else return _(d)}};var Mt={eager:!0},Lt={eager:!0,onDelete:"RESTRICT",onUpdate:"CASCADE"},qt={eager:!0,onDelete:"CASCADE",onUpdate:"CASCADE"};import{getMetadataArgsStorage as P}from"typeorm";function J(n){return n.map(i=>{i=i.trim();do i=i.trim().substring(0,i.length-1);while(i.endsWith(";"));return i}).join(" AND ")}function V(n,i){let r,e;if(typeof n=="string"||n instanceof String?i?(r=n,e=i):e=n:Array.isArray(n)?e=n:typeof n=="object"&&("name"in n&&(r=n.name),"expressions"in n&&(e=n.expressions)),!e||e.length===0)throw new Error(`Check expressions is required \u279C ${JSON.stringify(n)}, ${JSON.stringify(i)}`);return Array.isArray(e)||(e=[e]),e=J(e),{checkName:r,expressions:e}}function Kt(n,i){let{checkName:r,expressions:e}=V(n,i);return function(g,c){P().checks.push({target:c?g.constructor:g,name:r,expression:e})}}import{Index as w}from"typeorm";function q(n,i="IDX",r="_",e="__"){return _(`${i}${e}${n.join(r)}`,r,e)}function zt(n,i=!1,r=!1){if(Array.isArray(n)){let e=n,o;return r===!0?o=u.Index:typeof r=="string"&&(o=r),w(q(e,o),e)}else{let e=i,o=n;return r===!0?o=`${u.Index}__${o}`:typeof r=="string"&&(o=`${r}${o}`),w(_(o),e)}}import{Unique as K}from"typeorm";function m(n,i="UQ",r="_",e="__"){return _(`${i}${e}${n.join(r)}`,r,e)}function Yt(n,i=!1,r=!1){if(Array.isArray(n)){let e=n,o;return r===!0?o=u.Unique:typeof r=="string"&&(o=r),K(m(e,o),e)}else{let e=i,o=n;return r===!0?o=`${u.Unique}__${o}`:typeof r=="string"&&(o=`${r}${o}`),K(_(o),e)}}export{Kt as Checks,gt as ColumnOptionsExtra,u as ColumnPrefix,G as ColumnPrimaryType,M as ColumnSuffix,k as ColumnType,U as ConstLength,nt as EMAIL_LENGTH_MAX,it as EMAIL_LENGTH_MIN,zt as IndexColumns,Mt as MANY_TO_MANY_OPTION_DEFAULT,Lt as MANY_TO_ONE_OPTION_DEFAULT,st as NAME_LENGTH_MAX,ot as NAME_LENGTH_MIN,qt as ONE_TO_ONE_OPTION_DEFAULT,at as PASSWORD_LENGTH_MAX,ct as PASSWORD_LENGTH_MIN,C as PGSQL_BIG_INTEGER_MAX,tt as PGSQL_BIG_INTEGER_MIN,W as PGSQL_INTEGER_MAX,Y as PGSQL_INTEGER_MIN,D as PGSQL_MAX_IDENTIFIER_LENGTH,rt as PGSQL_NUMERIC_MAX,et as PGSQL_NUMERIC_MIN,y as PGSQL_SMALL_INTEGER_MAX,T as PGSQL_SMALL_INTEGER_MIN,p as SafeNamingStrategy,Yt as UniqueColumns,A as cryptSha1,_ as safeConstraint,q as safeIndex,m as safeUnique,x as stripPublic,L as stripSchema};
